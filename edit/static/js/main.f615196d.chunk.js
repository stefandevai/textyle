(this.webpackJsonptextyle=this.webpackJsonptextyle||[]).push([[1],{77:function(e,t,r){},78:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(1),i=r.n(a),c=r(22),s=r.n(c),l=r(4),o="[TILESET] Add tileset",d="[TILESET] Load existing textures",u="[TILESET] Texture loading complete",h="[TILESET] Select tileset",b="[TILESET] Update tileset",x="[TILESET] Delete tileset",j="[TILESET] Select tile",f="[CANVAS] Select tool",v="[CANVAS] Set tile size",p="[CANVAS] Display sidebar",g="[CANVAS] Toggle grid",m="[LAYER] Add one",O="[LAYER] Update",A="[LAYER] Delete",y="[LAYER] Select",w="[LAYER] Move",I="[LAYER] Toggle Visibility",L=function(e,t,r,n){return{type:o,payload:{name:e,tileSize:t,tilesetIndex:r,data:n}}},C=function(e,t,r){return{type:d,payload:{name:e,tileSize:t,tilesetIndex:r}}},E=function(e){return{type:u,payload:{}}},T=function(e){return{type:h,payload:{name:e}}},S=function(e,t,r){return{type:b,payload:{name:e,tileSize:t,tilesetIndex:r}}},B=function(e){return{type:f,payload:{tool:e}}},k=function(e){return{type:p,payload:{display:e}}},N=function(e){var t=e||{},r=t.name,n=t.tileSize,a=t.x,i=t.y,c=t.width,s=t.height;return{type:m,payload:{name:r,tileSize:n,x:a,y:i,width:c,height:s}}},z=function(e,t){return{type:O,payload:{name:e,tileSize:t}}},D=function(e){return{type:y,payload:{name:e}}},M=r(19),R=r(12),Q=r(16),U=r(34),P=r(33),F=r(20),G=r(21),X=r(3),Y={tilesetNames:[],tilesets:{},selectedTileset:"",selectedTile:-1,hasLoadedTextures:!1},V="DEFAULT_TOOL",J="PLACEMENT_TOOL",W="ERASER_TOOL",H="FILL_TOOL",Z="PAN_TOOL",K="MAGNIFY_TOOL",q={selectedTool:J,tileSize:[32,32],showSidebar:!1,showGrid:!0},_={selected:"",names:[],layers:{},lastIdx:0},$=Object(Q.c)({tileset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:case o:var r=t.payload,n=r.name,a=r.tileSize,i=r.tilesetIndex;return Object(X.a)(Object(X.a)({},e),{},{tilesetNames:[].concat(Object(G.a)(e.tilesetNames),[n]),tilesets:Object(X.a)(Object(X.a)({},e.tilesets),{},Object(F.a)({},n,{tileSize:a,tilesetIndex:i})),selectedTileset:n});case b:var c=t.payload,s=c.name,l=c.tileSize,f=c.tilesetIndex;if(!e.tilesetNames.includes(s))return e;var v=l||e.tilesets[s].tileSize,p=f||e.tilesets[s].tilesetIndex;return Object(X.a)(Object(X.a)({},e),{},{tilesets:Object(X.a)(Object(X.a)({},e.tilesets),{},Object(F.a)({},s,{tileSize:v,tilesetIndex:p}))});case u:return Object(X.a)(Object(X.a)({},e),{},{hasLoadedTextures:!0});case h:var g=t.payload.name;return Object(X.a)(Object(X.a)({},e),{},{selectedTileset:g});case x:var m=t.payload.name,O=e.tilesetNames.filter((function(e){return e!==m})),A=e.tilesets,y=(A[m],Object(U.a)(A,[m].map(P.a))),w=e.selectedTileset;if(w===m&&O.length>0){var I=Math.max(e.tilesetNames.indexOf(m)-1,0);w=O[I]}else 0==O.length&&(w="");return Object(X.a)(Object(X.a)({},e),{},{selectedTileset:w,tilesetNames:O,tilesets:y});case j:var L=t.payload.value;return Object(X.a)(Object(X.a)({},e),{},{selectedTile:L});default:return e}},canvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:var r=t.payload.tool;return Object(X.a)(Object(X.a)({},e),{},{selectedTool:r});case v:var n=t.payload.size;return n?Object(X.a)(Object(X.a)({},e),{},{tileSize:n}):e;case p:var a=t.payload.display;return Object(X.a)(Object(X.a)({},e),{},{showSidebar:a});case g:return Object(X.a)(Object(X.a)({},e),{},{showGrid:!e.showGrid});default:return e}},layers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:var r=t.payload,n=r.name,a=r.tileSize;return n&&""!==n||(n="Layer ".concat(e.lastIdx+1)),Object(X.a)(Object(X.a)({},e),{},{names:[].concat(Object(G.a)(e.names),[n]),layers:Object(X.a)(Object(X.a)({},e.layers),{},Object(F.a)({},n,{id:e.lastIdx,tileSize:a,visible:!0})),selected:n,lastIdx:e.lastIdx+1});case O:var i=t.payload,c=i.name,s=i.tileSize;if(!c||""===c||!e.names.includes(c))return e;var l=e.layers[c];return Object(X.a)(Object(X.a)({},e),{},{layers:Object(X.a)(Object(X.a)({},e.layers),{},Object(F.a)({},c,{id:l.id,tileSize:s||l.tileSize,visible:l.visible}))});case A:var o=t.payload.name,d=e.layers,u=(d[o],Object(U.a)(d,[o].map(P.a))),h=e.names.filter((function(e){return e!==o})),b=e.selected;if(b===o&&h.length>0){var x=Math.max(e.names.indexOf(o)-1,0);b=h[x]}else 0===h.length&&(b="");return Object(X.a)(Object(X.a)({},e),{},{names:h,layers:u,selected:b});case y:var j=t.payload.name;return Object(X.a)(Object(X.a)({},e),{},{selected:j});case w:var f=t.payload,v=f.name,p=f.to,g=e.names.indexOf(v),L=e.names;return-1!==g&&(L.splice(g,1),L.splice(p,0,v)),Object(X.a)(Object(X.a)({},e),{},{names:L});case I:var C=t.payload.name;return Object(X.a)(Object(X.a)({},e),{},{layers:Object(X.a)(Object(X.a)({},e.layers),{},Object(F.a)({},C,Object(X.a)(Object(X.a)({},e.layers[C]),{},{visible:!e.layers[C].visible})))});default:return e}}}),ee=r(6),te=r.n(ee),re=r(9),ne="json",ae=r(18),ie="lastSelectedTileset",ce="rgba(253, 250, 254, 0.1)",se=new ae.a("textures-store","textures"),le=function(){var e=Object(re.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ae.d)(se);case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(re.a)(te.a.mark((function e(t){var r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ae.c)(t,se);case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(re.a)(te.a.mark((function e(t,r,n){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ae.e)(t,{file:n,tileSize:r,tilesetIndex:ge.lastId},se);case 3:return e.next=5,ge.addTiles(t,r);case 5:localStorage.setItem(ie,t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(re.a)(te.a.mark((function e(t,r,n){var a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be(t);case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Object(ae.c)(t,se);case 8:return a=e.sent,e.next=11,Object(ae.e)(t,{file:a.file,tileSize:r||a.tileSize,tilesetIndex:n||a.tilesetIndex},se);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n){return e.apply(this,arguments)}}(),he=function(){var e=Object(re.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ae.b)(t,se);case 3:localStorage.getItem(ie)===t&&localStorage.removeItem(ie),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(re.a)(te.a.mark((function e(t){var r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ae.d)(se);case 3:return r=e.sent,e.abrupt("return",r.includes(t));case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(re.a)(te.a.mark((function e(t,r){var n,a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ge.lastId>0)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,be(t);case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,ge.addTiles(t,r);case 10:return n=e.sent,e.next=13,Object(ae.c)(t,se);case 13:return(a=e.sent).tilesetIndex=n,e.next=17,Object(ae.e)(t,a,se);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,r){return e.apply(this,arguments)}}(),je=function(){var e=Object(re.a)(te.a.mark((function e(t){var r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe(t);case 3:if((r=e.sent).file){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",createImageBitmap(r.file));case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),fe=function(e,t,r){r=r||[0,0];var n=e.target.getBoundingClientRect();Math.floor(e.target.width/t[0]);return[Math.floor((e.pageX+r[0]-n.left)/t[0]),Math.floor((e.pageY+r[1]-n.top)/t[1])]},ve=function(e,t,r){if(t[0]>=r[0]||t[1]>=r[1])return[[0,0],[0,0],[0,0],[0,0]];var n=1*t[0]/r[0],a=1*t[1]/r[1],i=Math.floor(r[0]/t[0]),c=Math.floor(r[1]/t[1]),s=i*c,l=Math.floor(e%i),o=Math.floor(e%s/i),d=l*(r[0]/i)*1/r[0],u=o*(r[1]/c)/r[1];return[[d,u],[d+n,u],[d+n,u+a],[d,u+a]]},pe=function(e){var t=e.context,r=e.width,n=e.height,a=e.tileSize,i=e.color,c=e.dashed,s=void 0!==c&&c,l=e.offset,o=void 0===l?[0,0]:l;t.strokeStyle=i,t.lineWidth=1,s&&t.setLineDash([4,2]);for(var d=a[1]+o[1];d<n+o[1];d+=a[1])t.beginPath(),t.moveTo(o[0],d+.5),t.lineTo(r+o[0],d+.5),t.stroke();for(var u=a[0]+o[0];u<r+o[0];u+=a[0])t.beginPath(),t.moveTo(u+.5,o[1]),t.lineTo(u+.5,n+o[1]),t.stroke()},ge=new function e(){var t=this;Object(R.a)(this,e),this.addTiles=function(){var e=Object(re.a)(te.a.mark((function e(r,n){var a,i,c,s,l,o,d;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return console.log(r),e.abrupt("return");case 3:return e.next=5,je(r);case 5:for(a=e.sent,i=Math.floor(a.width/n[0]),c=Math.floor(a.height/n[1]),s=t.lastId,l=0;l<c;l++)for(o=0;o<i;o++)d=ve(l*i+o,n,[a.width,a.height]),t.tiles[t.lastId]={size:n,tileset:r,uv:d},++t.lastId;return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.get=function(e){return e<0||e>=t.tiles.length?null:t.tiles[e]},this.tiles=[],this.lastId=0},me=function(){var e=Object(re.a)(te.a.mark((function e(){var t,r,n,a,i,c,s,l,o,d,u,h,b,x,j,f,v,p;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t={}).map={},(r=we.getState()).layers&&r.layers.layers){e.next=6;break}return console.error("There are no layers in the current project."),e.abrupt("return",JSON.stringify(t));case 6:n=r.layers.names,a=r.layers.layers,t.map.layers=[],i=Object(M.a)(n);try{for(i.s();!(c=i.n()).done;){for(s=c.value,l=a[s],10,10,0,0,(o={}).name=s,o.width=Ae.layerWidth(l.id),o.height=Ae.layerHeight(l.id),o.x=Ae.layerX(l.id),o.y=Ae.layerY(l.id),o.data=[],d=0;d<10;d++)for(u=0;u<10;u++)h=Ae.get(u,d,l.id),o.data.push(h);t.map.layers.push(o)}}catch(g){i.e(g)}finally{i.f()}b=r.tileset.tilesetNames,t.tilesets=[],x=Object(M.a)(b),e.prev=14,x.s();case 16:if((j=x.n()).done){e.next=27;break}return f=j.value,(v={}).name=f,e.next=22,oe(f);case 22:p=e.sent,v.tileIndex=p.tilesetIndex,t.tilesets.push(v);case 25:e.next=16;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(14),x.e(e.t0);case 32:return e.prev=32,x.f(),e.finish(32);case 35:return t.tiles=ge.tiles,e.abrupt("return",JSON.stringify(t));case 37:case"end":return e.stop()}}),e,null,[[14,29,32,35]])})));return function(){return e.apply(this,arguments)}}(),Oe=new function e(){var t=this;Object(R.a)(this,e),this.init=function(){var e=Object(re.a)(te.a.mark((function e(n,a){var i,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([r.e(0),r.e(4)]).then(r.bind(null,82));case 3:return t.wasm=e.sent,e.next=6,r.e(0).then(r.bind(null,80));case 6:i=e.sent,c=i.memory,t.map=t.wasm.Tilemap.new(),t.memory=c,t.hasInitialized=!0,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("[x] Error loading grid: ".concat(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}(),this.width=function(){return t.map.width()},this.height=function(){return t.map.height()},this.widthInPixels=function(){return t.map.layer_width_in_pixels()},this.heightInPixels=function(){return t.map.layer_height_in_pixels()},this.addLayer=function(e,r,n,a,i){e&&r||(e=0,r=0),n&&a||(n=Oe.width(),a=Oe.height()),t.map.add_layer(e,r,n,a,i[0],i[1])},this.get=function(e,r,n){return t.map.get(e,r,n)},this.set=function(e,r,n,a){t.map.set(e,r,n,a)},this.fill=function(e,r,n,a){t.map.fill(e,r,n,a)},this.layerWidth=function(e){return t.map.layer_width(e)},this.layerHeight=function(e){return t.map.layer_height(e)},this.layerX=function(e){return t.map.layer_x(e)},this.layerY=function(e){return t.map.layer_y(e)},this.export=function(e){switch(e){case ne:return me();default:return null}},this.hasInitialized=!1},Ae=Oe,ye=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Q.d,we=Object(Q.e)($,ye(Object(Q.a)((function(e){return function(e){return function(t){switch(t.type){case m:var r=t.payload||{},n=r.x,a=r.y,i=r.width,c=r.height,s=r.tileSize;Ae.addLayer(n,a,i,c,s)}return e(t)}}}),(function(e){return function(e){return function(t){switch(t.type){case o:var r=t.payload||{},n=r.name,a=r.tileSize,i=r.data;de(n,a,i);break;case d:var c=t.payload||{},s=c.name,l=c.tileSize;xe(s,l);break;case b:var u=t.payload||{},h=u.name,j=u.tileSize,f=u.tilesetIndex;ue(h,j,f);break;case x:var v=(t.payload||{}).name;he(v)}return e(t)}}})))),Ie=function e(t,r,n){var a=this;Object(R.a)(this,e),this.init=function(){var e=a.createShader(a.vertexSource,a.gl.VERTEX_SHADER),t=a.createShader(a.fragmentSource,a.gl.FRAGMENT_SHADER);a.id=a.gl.createProgram(),a.gl.attachShader(a.id,e),a.gl.attachShader(a.id,t),a.gl.linkProgram(a.id),a.gl.getProgramParameter(a.id,a.gl.LINK_STATUS)||console.error("Unable to initialize the shader program: "+a.gl.getProgramInfoLog(a.id))},this.createShader=function(e,t){var r=a.gl.createShader(t);if(a.gl.shaderSource(r,e),a.gl.compileShader(r),!a.gl.getShaderParameter(r,a.gl.COMPILE_STATUS)){var n=a.gl.getShaderInfoLog(r);console.error("Could not compile shader: "+n)}return r},this.use=function(){a.gl.useProgram(a.id)},this.setMat4=function(e,t){a.gl.uniformMatrix4fv(a.gl.getUniformLocation(a.id,e),!1,t)},this.setInt=function(e,t){a.gl.uniform1i(a.gl.getUniformLocation(a.id,e),t)},this.gl=t,this.vertexSource=r,this.fragmentSource=n,this.init()},Le=r(31),Ce=function e(t,r){var n=this;Object(R.a)(this,e),this.init=function(e){n.id=e.createTexture(),e.bindTexture(e.TEXTURE_2D,n.id),n.width=1,n.height=1;var t=new Uint8Array([0,0,0,0]);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,t),n.idbKey&&je(n.idbKey).then((function(t){t&&(n.width=t.width,n.height=t.height,e.bindTexture(e.TEXTURE_2D,n.id),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST))}))},this.bind=function(e){e.bindTexture(e.TEXTURE_2D,n.id)},this.idbKey=r,this.id=null,this.width=0,this.height=0,this.init(t)},Ee=function(){function e(){var t=this;Object(R.a)(this,e),this.add=function(e,r){t.indexMap.set(r,t.map.size),t.map.set(r,new Ce(e,r))},this.map=new Map,this.indexMap=new Map}return Object(Le.a)(e,[{key:"get",value:function(e){return this.map.get(e)}},{key:"getIndex",value:function(e){return this.indexMap.get(e)}},{key:"has",value:function(e){return this.map.has(e)}},{key:"remove",value:function(e){this.map.delete(e)}}]),e}(),Te="uMVP",Se="uSamplers",Be="aPosition",ke="aTextureCoord",Ne="aTextureIdx",ze="aColor",De="#version 300 es\n\n      in vec2 ".concat(Be,";\n      in float ").concat(Ne,";\n      in vec2 ").concat(ke,";\n      in vec4 ").concat(ze,";\n\n      out vec2 vTextureCoord;\n      out float vTextureIdx;\n      out vec4 vColor;\n\n      uniform mat4 ").concat(Te,";\n\n      void main() {\n        gl_Position = ").concat(Te," * vec4(aPosition, 0.0, 1.0);\n        vTextureCoord = ").concat(ke,";\n        vTextureIdx = ").concat(Ne,";\n        vColor = ").concat(ze,";\n      }\n      "),Me="#version 300 es\n\n      precision mediump float;\n\n      in vec2 vTextureCoord;\n      in float vTextureIdx;\n      in vec4 vColor;\n\n      out vec4 oColor;\n\n      uniform sampler2D ".concat(Se,"[11];\n\n      void main() {\n        vec4 finalColor = vColor;\n\n        if (vTextureIdx > 0.0)\n        {\n          int tid = int(vTextureIdx + 0.5);\n          switch (tid)\n          {\n            case 0:\n              finalColor = texture(").concat(Se,"[0], vTextureCoord);\n              break;\n            case 1:\n              finalColor = texture(").concat(Se,"[1], vTextureCoord);\n              break;\n            case 2:\n              finalColor = texture(").concat(Se,"[2], vTextureCoord);\n              break;\n            case 3:\n              finalColor = texture(").concat(Se,"[3], vTextureCoord);\n              break;\n            case 4:\n              finalColor = texture(").concat(Se,"[4], vTextureCoord);\n              break;\n            case 5:\n              finalColor = texture(").concat(Se,"[5], vTextureCoord);\n              break;\n            case 6:\n              finalColor = texture(").concat(Se,"[6], vTextureCoord);\n              break;\n            case 7:\n              finalColor = texture(").concat(Se,"[7], vTextureCoord);\n              break;\n            case 8:\n              finalColor = texture(").concat(Se,"[8], vTextureCoord);\n              break;\n            case 9:\n              finalColor = texture(").concat(Se,"[9], vTextureCoord);\n              break;\n            case 10:\n              finalColor = texture(").concat(Se,"[10], vTextureCoord);\n              break;\n            default:\n              break;\n          }\n        }\n\n        oColor = finalColor;\n      }\n      "),Re=function e(t,r){var n=this;Object(R.a)(this,e),this.initialize=function(){n.vertices=new Float32Array(36e4),n.indices=function(e){for(var t=0,r=new Uint16Array(e),n=0;n<e;n+=6)r[n]=t,r[n+1]=t+1,r[n+2]=t+2,r[n+3]=t,r[n+4]=t+2,r[n+5]=t+3,t+=4;return r}(6e4),n.VAO=n.gl.createVertexArray(),n.VBO=n.gl.createBuffer(),n.EBO=n.gl.createBuffer(),n.gl.bindVertexArray(n.VAO),n.gl.bindBuffer(n.gl.ARRAY_BUFFER,n.VBO),n.gl.bufferData(n.gl.ARRAY_BUFFER,n.vertices,n.gl.DYNAMIC_DRAW);var e=n.gl.getAttribLocation(n.shaderProgram.id,Be);n.gl.vertexAttribPointer(e,2,n.gl.FLOAT,!1,36,0),n.gl.enableVertexAttribArray(e);var t=n.gl.getAttribLocation(n.shaderProgram.id,ke);n.gl.vertexAttribPointer(t,2,n.gl.FLOAT,!1,36,8),n.gl.enableVertexAttribArray(t);var r=n.gl.getAttribLocation(n.shaderProgram.id,Ne);n.gl.vertexAttribPointer(r,1,n.gl.FLOAT,!1,36,16),n.gl.enableVertexAttribArray(r);var a=n.gl.getAttribLocation(n.shaderProgram.id,ze);n.gl.vertexAttribPointer(a,4,n.gl.FLOAT,!1,36,20),n.gl.enableVertexAttribArray(a),n.gl.bindBuffer(n.gl.ELEMENT_ARRAY_BUFFER,n.EBO),n.gl.bufferData(n.gl.ELEMENT_ARRAY_BUFFER,n.indices,n.gl.STATIC_DRAW),n.vertexIndex=0,n.indexCount=0,n.textureManager.add(n.gl)},this.begin=function(){n.gl.bindBuffer(n.gl.ARRAY_BUFFER,n.VBO)},this.emplace=function(e,t,r){var a=ge.get(e);if(a){var i=1,c=1,s=1,l=1;r&&(i=r[0],c=r[1],s=r[2],l=r[3]);var o=-1;n.textureManager.has(a.tileset)||n.textureManager.add(n.gl,a.tileset),o=n.textureManager.getIndex(a.tileset),n.vertices[n.vertexIndex++]=t[0],n.vertices[n.vertexIndex++]=t[1],n.vertices[n.vertexIndex++]=a.uv[0][0],n.vertices[n.vertexIndex++]=a.uv[0][1],n.vertices[n.vertexIndex++]=o,n.vertices[n.vertexIndex++]=i,n.vertices[n.vertexIndex++]=c,n.vertices[n.vertexIndex++]=s,n.vertices[n.vertexIndex++]=l,n.vertices[n.vertexIndex++]=t[0]+a.size[0],n.vertices[n.vertexIndex++]=t[1],n.vertices[n.vertexIndex++]=a.uv[1][0],n.vertices[n.vertexIndex++]=a.uv[1][1],n.vertices[n.vertexIndex++]=o,n.vertices[n.vertexIndex++]=i,n.vertices[n.vertexIndex++]=c,n.vertices[n.vertexIndex++]=s,n.vertices[n.vertexIndex++]=l,n.vertices[n.vertexIndex++]=t[0]+a.size[0],n.vertices[n.vertexIndex++]=t[1]+a.size[1],n.vertices[n.vertexIndex++]=a.uv[2][0],n.vertices[n.vertexIndex++]=a.uv[2][1],n.vertices[n.vertexIndex++]=o,n.vertices[n.vertexIndex++]=i,n.vertices[n.vertexIndex++]=c,n.vertices[n.vertexIndex++]=s,n.vertices[n.vertexIndex++]=l,n.vertices[n.vertexIndex++]=t[0],n.vertices[n.vertexIndex++]=t[1]+a.size[1],n.vertices[n.vertexIndex++]=a.uv[3][0],n.vertices[n.vertexIndex++]=a.uv[3][1],n.vertices[n.vertexIndex++]=o,n.vertices[n.vertexIndex++]=i,n.vertices[n.vertexIndex++]=c,n.vertices[n.vertexIndex++]=s,n.vertices[n.vertexIndex++]=l,n.indexCount+=6}else console.error("Could not get tile data for tile ".concat(a))},this.emplaceQuad=function(e,t,r){var a=r[0],i=r[1],c=r[2],s=r[3];n.vertices[n.vertexIndex++]=e[0],n.vertices[n.vertexIndex++]=e[1],n.vertices[n.vertexIndex++]=0,n.vertices[n.vertexIndex++]=0,n.vertices[n.vertexIndex++]=-1,n.vertices[n.vertexIndex++]=a,n.vertices[n.vertexIndex++]=i,n.vertices[n.vertexIndex++]=c,n.vertices[n.vertexIndex++]=s,n.vertices[n.vertexIndex++]=e[0]+t[0],n.vertices[n.vertexIndex++]=e[1],n.vertices[n.vertexIndex++]=0,n.vertices[n.vertexIndex++]=0,n.vertices[n.vertexIndex++]=-1,n.vertices[n.vertexIndex++]=a,n.vertices[n.vertexIndex++]=i,n.vertices[n.vertexIndex++]=c,n.vertices[n.vertexIndex++]=s,n.vertices[n.vertexIndex++]=e[0]+t[0],n.vertices[n.vertexIndex++]=e[1]+t[1],n.vertices[n.vertexIndex++]=0,n.vertices[n.vertexIndex++]=0,n.vertices[n.vertexIndex++]=-1,n.vertices[n.vertexIndex++]=a,n.vertices[n.vertexIndex++]=i,n.vertices[n.vertexIndex++]=c,n.vertices[n.vertexIndex++]=s,n.vertices[n.vertexIndex++]=e[0],n.vertices[n.vertexIndex++]=e[1]+t[1],n.vertices[n.vertexIndex++]=0,n.vertices[n.vertexIndex++]=0,n.vertices[n.vertexIndex++]=-1,n.vertices[n.vertexIndex++]=a,n.vertices[n.vertexIndex++]=i,n.vertices[n.vertexIndex++]=c,n.vertices[n.vertexIndex++]=s,n.indexCount+=6},this.flush=function(){n.gl.bufferSubData(n.gl.ARRAY_BUFFER,0,n.vertices.subarray(0,n.vertexIndex)),n.vertexIndex=0},this.render=function(){if(0!==n.indexCount){var e=0;n.textureManager.map.forEach((function(t){n.gl.activeTexture(n.gl.TEXTURE0+e),t.bind(n.gl),n.shaderProgram.setInt("".concat(Se,"[").concat(e,"]"),e),++e})),n.gl.activeTexture(n.gl.TEXTURE0),n.gl.bindVertexArray(n.VAO),n.gl.drawElements(n.gl.TRIANGLES,n.indexCount,n.gl.UNSIGNED_SHORT,0),n.indexCount=0}},this.gl=t,this.shaderProgram=r,this.textureManager=new Ee,this.initialize()},Qe=r(23),Ue=[.25,.5,.75,1,1.25,1.5,1.75],Pe=function e(t,r){var n=this;Object(R.a)(this,e),this.setOrigin=function(e,t){n.origin=[n.position[0],n.position[1]],n.clientOrigin=[e,t]},this.moveTo=function(e,t){n.position=[n.origin[0]+(n.clientOrigin[0]-e),n.origin[1]+(n.clientOrigin[1]-t),n.cameraZ],n.calculateMvp()},this.setZoom=function(e){n.zoom=n.clampZoom(e),n.calculateMvp()},this.applyZoom=function(e){n.zoom+=e,Math.abs(n.zoom)<10||(n.zoom<0?n.zoomLevel=Math.max(0,n.zoomLevel-1):n.zoom>0&&(n.zoomLevel=Math.min(Ue.length-1,n.zoomLevel+1)),n.perceivedWidth=n.width/Ue[n.zoomLevel],n.perceivedHeight=n.height/Ue[n.zoomLevel],n.zoom=0,n.calculateMvp())},this.incrementZoom=function(){n.zoomLevel=Math.min(Ue.length-1,n.zoomLevel+1),n.perceivedWidth=n.width/Ue[n.zoomLevel],n.perceivedHeight=n.height/Ue[n.zoomLevel],n.calculateMvp()},this.decrementZoom=function(){n.zoomLevel=Math.max(0,n.zoomLevel-1),n.perceivedWidth=n.width/Ue[n.zoomLevel],n.perceivedHeight=n.height/Ue[n.zoomLevel],n.calculateMvp()},this.getMvp=function(){return n.mvp},this.getZoomLevel=function(){return Ue[n.zoomLevel]},this.calculateMvp=function(){var e=n.position[0]/Ue[n.zoomLevel],t=n.position[1]/Ue[n.zoomLevel];Qe.a.ortho(n.projection,e,n.perceivedWidth+e,n.perceivedHeight+t,t,n.near,n.far),Qe.a.multiply(n.mvp,n.projection,n.modelView)},this.updateViewport=function(e,t){n.width=e,n.height=t,n.perceivedWidth=n.width/Ue[n.zoomLevel],n.perceivedHeight=n.height/Ue[n.zoomLevel],n.calculateMvp()},this.width=t,this.height=r,this.zoomLevel=3,this.zoom=0,this.perceivedWidth=this.width,this.perceivedHeight=this.height,this.origin=[0,0],this.clientOrigin=[0,0],this.cameraZ=80,this.position=[0,0,this.cameraZ],this.near=.1,this.far=100,this.projection=Qe.a.create(),this.modelView=Qe.a.create(),this.mvp=Qe.a.create(),Qe.a.translate(this.modelView,this.modelView,[0,0,-this.cameraZ]),this.calculateMvp()},Fe=new function e(){var t=this;Object(R.a)(this,e),this.hasInitialized=!1,this.init=function(e){t.gl=e,t.gl&&(t.gl.enable(t.gl.BLEND),t.gl.blendFunc(t.gl.SRC_ALPHA,t.gl.ONE_MINUS_SRC_ALPHA),t.shaderProgram=new Ie(t.gl,De,Me),t.shaderProgram.use(),t.camera=new Pe(t.gl.canvas.width,t.gl.canvas.height),t.shaderProgram.setMat4(Te,t.camera.getMvp()),t.batch=new Re(t.gl,t.shaderProgram),t.hasInitialized=!0)},this.setClearColor=function(e,r,n,a){t.gl.clearColor(e,r,n,a)},this.updateViewport=function(e,r){t.camera.updateViewport(e,r)},this.render=function(){t.gl.clear(t.gl.COLOR_BUFFER_BIT),t.renderTilemap(),window.requestAnimationFrame(t.render)},this.renderTilemap=function(){if(Ae.hasInitialized){t.shaderProgram.use();var e=t.gl.canvas.width,r=t.gl.canvas.height,n=we.getState().layers;t.shaderProgram.setMat4(Te,t.camera.getMvp()),t.batch.begin(),t.batch.emplaceQuad([0,0],[Ae.widthInPixels(),Ae.heightInPixels()],[.12157,.16078,.21569,1]);var a,i=Object(M.a)(n.names);try{for(i.s();!(a=i.n()).done;){var c=a.value,s=n.layers[c];if(s.visible&&s.id>=0)for(var l=0,o=0;o<r;l++,o+=s.tileSize[1])for(var d=0,u=0;u<e;d++,u+=s.tileSize[0]){var h=Ae.get(d,l,s.id);-1!=h&&t.batch.emplace(h,[u,o])}}}catch(b){i.e(b)}finally{i.f()}t.batch.flush(),t.batch.render()}}},Ge=function(){var e=Object(l.c)(),t=Object(a.useRef)(),r=Object(l.d)((function(e){return e.canvas.tileSize}));return Object(a.useEffect)((function(){t.current&&(t.current.width=t.current.clientWidth,t.current.height=t.current.clientHeight,Ae.hasInitialized||Ae.init().then((function(){e(N({name:"",tileSize:r,x:0,y:0,width:Math.floor(t.current.width/r[0])+1,height:Math.floor(t.current.height/r[1])+1}))})),Fe.hasInitialized||(Fe.init(t.current.getContext("webgl2")),Fe.setClearColor(27/255,35/255,46/255,1),window.requestAnimationFrame(Fe.render)))}),[r,e]),Object(n.jsx)("canvas",{id:"tilemap-canvas",ref:t,className:"col-span-full row-span-full z-0 w-full h-full"})},Xe=r(8),Ye=function(){var e=Object(l.c)(),t=Object(a.useRef)(),r=Object(a.useState)([0,0]),i=Object(Xe.a)(r,2),c=i[0],s=i[1],o=Object(a.useState)(1),d=Object(Xe.a)(o,2),u=d[0],h=d[1],b=Object(l.d)((function(e){return{selectedLayer:Object(X.a)({name:e.layers.selected},e.layers.layers[e.layers.selected]),layers:e.layers.layers}})),x=b.selectedLayer,j=b.layers,f=Object(l.d)((function(e){return e.tileset.selectedTile})),v=Object(l.d)((function(e){return e.canvas})).selectedTool,p=Object(l.d)((function(e){return e.canvas.showGrid}));Object(a.useEffect)((function(){var e=t.current;if(e){window.addEventListener("resize",(function(){e&&Fe.updateViewport(e.clientWidth,e.clientHeight)})),t.current.width=e.clientWidth,t.current.height=e.clientHeight;var r=function(e){return e.preventDefault()};return e.addEventListener("wheel",r,{passive:!1}),function(){e.removeEventListener("wheel",r)}}}),[]),Object(a.useEffect)((function(){var t=function(t){" "===t.key&&e(B(Z))},r=function(t){" "===t.key&&e(B(V))};return window.addEventListener("keydown",t),window.addEventListener("keyup",r),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",r)}}),[e]),Object(a.useEffect)((function(){var e=t.current;if(x.tileSize&&e){var r=e.getContext("2d");r.clearRect(0,0,e.width,e.height),p&&(!function(e){var t=e.context,r=e.width,n=e.height,a=e.color,i=e.dashed,c=void 0!==i&&i,s=e.offset,l=void 0===s?[0,0]:s;t.strokeStyle=a,t.lineWidth=1,c&&t.setLineDash([4,2]),t.beginPath(),t.moveTo(l[0],l[1]+.5),t.lineTo(r+l[0],l[1]+.5),t.stroke(),t.beginPath(),t.moveTo(l[0],n+l[1]+.5),t.lineTo(r+l[0],n+l[1]+.5),t.stroke(),t.beginPath(),t.moveTo(l[0]+.5,l[1]),t.lineTo(l[0]+.5,n+l[1]),t.stroke(),t.beginPath(),t.moveTo(r+l[0]+.5,l[1]),t.lineTo(r+l[0]+.5,n+l[1]),t.stroke()}({context:r,width:Ae.width()*u,height:Ae.height()*u,color:ce,dashed:!0,offset:c}),pe({context:r,width:Ae.width()*u,height:Ae.height()*u,color:ce,tileSize:[x.tileSize[0]*u,x.tileSize[1]*u],dashed:!0,offset:c}))}}),[x,c,u,p]);var g=function(e){var t=fe(e,[x.tileSize[0]*u,x.tileSize[1]*u],Fe.camera.position),r=x.id;switch(v){case V:break;case J:2===e.button?Ae.set.apply(Ae,Object(G.a)(t).concat([-1,r])):0===e.button&&null!==f&&void 0!==f&&-1!==f&&Ae.set.apply(Ae,Object(G.a)(t).concat([f,r]));break;case W:Ae.set.apply(Ae,Object(G.a)(t).concat([-1,r]));break;case Z:if(0==e.clientX||0==e.clientY)break;Fe.camera.moveTo(e.clientX,e.clientY),s([-Fe.camera.position[0],-Fe.camera.position[1]])}};return Object(n.jsx)("canvas",{id:"editor-canvas",ref:t,onWheel:function(e){e.altKey&&Fe.camera.applyZoom(e.deltaY)},onMouseDown:function(e){x.name&&j[x.name]&&(!function(e){switch(v){case H:var t=fe(e,[x.tileSize[0]*u,x.tileSize[1]*u],Fe.camera.position),r=x.id;Ae.fill.apply(Ae,Object(G.a)(t).concat([f,r]));break;case Z:Fe.camera.setOrigin(e.clientX,e.clientY);break;case K:e.altKey?(Fe.camera.decrementZoom(),h(Fe.camera.getZoomLevel())):(Fe.camera.incrementZoom(),h(Fe.camera.getZoomLevel()))}}(e),g(e))},onDragOver:function(e){x.name&&j[x.name]&&g(e)},onDragStart:function(e){var t=document.createElement("img");t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e.dataTransfer.setDragImage(t,0,0)},onContextMenu:function(e){return e.preventDefault()},className:"col-span-full row-span-full z-10 w-full h-full",draggable:"true"})},Ve=function(){return Object(n.jsx)("div",{className:"col-span-full row-span-full flex flex-col",children:Object(n.jsxs)("section",{className:"grid flex-1 bg-gray-600",children:[Object(n.jsx)(Ye,{}),Object(n.jsx)(Ge,{})]})})},Je=r(25),We=r(26),He=r(10),Ze=r.n(He),Ke="border-gray-600",qe="h-7",_e=function(e){var t=e.iconPath,r=e.routerPath,i=Object(l.c)(),c=Object(l.d)((function(e){return e.canvas.showSidebar})),s=Object(a.useState)("#/".concat(r)===window.location.hash),o=Object(Xe.a)(s,2),d=o[0],u=o[1];return Object(n.jsx)(We.b,{replace:d,to:r,className:"w-full",activeClassName:"".concat("bg-gray-800"," ").concat("text-green-400"),isActive:function(e,t){return null!==e&&c},children:Object(n.jsx)("button",{className:"w-full py-3 flex justify-center ".concat("hover:bg-gray-800"," ").concat("hover:text-green-300"),onClick:function(){var e="#/".concat(r)===window.location.hash;u(e),e?i(k(!c)):c||i(k(!0))},"data-tip":!0,"data-for":r,"data-testid":r,children:Object(n.jsx)(Ze.a,{path:t,size:1})})})},$e="tiles",et="import",tt="save",rt="settings",nt="help",at="TOGGLE_GRID",it=new Map;it.set(V,"default tool"),it.set(J,"placement tool"),it.set(W,"erase tool"),it.set(H,"fill tool"),it.set(Z,"pan tool"),it.set(K,"zoom"),it.set(at,"toggle grid"),it.set($e,"tab tiles"),it.set(et,"tab import"),it.set(tt,"tab export"),it.set(rt,"settings tab"),it.set(nt,"help tab");var ct=it,st=r(7);function lt(){return(lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ot(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var dt=a.createElement("mask",{id:"path-1-outside-1",maskUnits:"userSpaceOnUse",x:.745167,y:.745174,width:271.529,height:271.529,fill:"black"},a.createElement("rect",{fill:"white",x:.745167,y:.745174,width:271.529,height:271.529}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46 136.51L91.2548 91.2548L91.9619 90.5477L136.51 46L181.057 90.5477L181.764 91.2548L227.019 136.51L181.764 181.765L136.51 136.51L91.2548 181.765L46 136.51Z"})),ut=a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46 136.51L91.2548 91.2548L91.9619 90.5477L136.51 46L181.057 90.5477L181.764 91.2548L227.019 136.51L181.764 181.765L136.51 136.51L91.2548 181.765L46 136.51Z",fill:"#34D399"}),ht=a.createElement("path",{d:"M46 136.51L23.3726 113.882L0.745167 136.51L23.3726 159.137L46 136.51ZM136.51 46L159.137 23.3726L136.51 0.745174L113.882 23.3726L136.51 46ZM227.019 136.51L249.647 159.137L272.274 136.51L249.647 113.882L227.019 136.51ZM181.764 181.765L159.137 204.392L181.764 227.019L204.392 204.392L181.764 181.765ZM136.51 136.51L159.137 113.882L136.51 91.2548L113.882 113.882L136.51 136.51ZM91.2548 181.765L68.6274 204.392L91.2548 227.019L113.882 204.392L91.2548 181.765ZM68.6274 68.6274L23.3726 113.882L68.6274 159.137L113.882 113.882L68.6274 68.6274ZM69.3345 67.9203L68.6274 68.6274L113.882 113.882L114.589 113.175L69.3345 67.9203ZM113.882 23.3726L69.3345 67.9203L114.589 113.175L159.137 68.6274L113.882 23.3726ZM203.685 67.9203L159.137 23.3726L113.882 68.6274L158.43 113.175L203.685 67.9203ZM158.43 113.175L159.137 113.882L204.392 68.6274L203.685 67.9203L158.43 113.175ZM159.137 113.882L204.392 159.137L249.647 113.882L204.392 68.6274L159.137 113.882ZM204.392 113.882L159.137 159.137L204.392 204.392L249.647 159.137L204.392 113.882ZM204.392 159.137L159.137 113.882L113.882 159.137L159.137 204.392L204.392 159.137ZM113.882 204.392L159.137 159.137L113.882 113.882L68.6274 159.137L113.882 204.392ZM23.3726 159.137L68.6274 204.392L113.882 159.137L68.6274 113.882L23.3726 159.137Z",fill:"#0A0913",mask:"url(#path-1-outside-1)"}),bt=a.createElement("rect",{x:91.2548,y:181.765,width:64,height:64,transform:"rotate(-45 91.2548 181.765)",fill:"#FBFDFC",stroke:"#0A0913",strokeWidth:32});function xt(e,t){var r=e.title,n=e.titleId,i=ot(e,["title","titleId"]);return a.createElement("svg",lt({width:"100%",height:"100%",viewBox:"0 0 273 273",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},i),r?a.createElement("title",{id:n},r):null,dt,ut,ht,bt)}var jt=a.forwardRef(xt),ft=(r.p,function(){var e=[{path:$e,icon:st.v},{path:tt,icon:st.b},{path:rt,icon:st.a},{path:nt,icon:st.n}].map((function(e){return Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)(_e,{routerPath:e.path,iconPath:e.icon}),Object(n.jsx)(Je.a,{id:e.path,place:"right",effect:"solid",delayShow:600,children:ct.get(e.path)})]},e.path)}));return Object(n.jsxs)("div",{className:"flex flex-col justify-end bg-almost-black border-r ".concat(Ke),children:[Object(n.jsx)("div",{className:"flex-1 flex flex-col justify-start",children:Object(n.jsx)("div",{className:"py-3 px-0.5",children:Object(n.jsx)(jt,{})})}),e]})}),vt=function(e){var t=e.children,r=e.title;return Object(n.jsxs)("div",{className:"flex-1 flex flex-col text-sm",children:[Object(n.jsx)("h2",{className:"".concat(qe," bg-almost-black border-b ").concat(Ke," px-2 flex items-center"),children:r}),t]})},pt=function(e){return e.layers},gt=function(e){return function(e){return pt(e)?pt(e).names:[]}(e).map((function(t){return function(e,t){return pt(e)?Object(X.a)(Object(X.a)({},pt(e).layers[t]),{},{name:t}):{}}(e,t)}))},mt=function(e){return gt(e).reverse()},Ot=r(47),At=function(e){var t=e.title,r=e.children,i=Object(a.useState)(!0),c=Object(Xe.a)(i,2),s=c[0],l=c[1],o=s?st.p:st.q,d=s?"border-b ".concat(Ke):"";return Object(n.jsxs)("div",{className:d,children:[Object(n.jsxs)("div",{className:"text-xs flex items-center hover:bg-gray-800 cursor-pointer border-b ".concat(Ke," ").concat(qe),onDoubleClick:function(e){return l(!s)},children:[Object(n.jsx)(Ze.a,{path:o,size:1}),Object(n.jsx)("h1",{className:"select-none",children:t})]}),Object(n.jsx)(Ot.Collapse,{isOpened:s,children:Object(n.jsx)("div",{className:"text-xs text-gray-300 px-2 py-2",children:r})})]})},yt=r(29),wt=function(e){var t=e.layer,r=e.index,a=e.isSelected,i=Object(l.c)(),c=function(){i(D(t.name))},s=function(){var e;i((e=t.name,{type:I,payload:{name:e}}))},o=t.visible?st.g:st.h,d=a?"bg-gray-700 hover:text-white":"bg-gray-800 hover:bg-gray-900",u=t.visible?"layer-visible":"layer-hidden";return Object(n.jsx)("div",{className:"border-t border-gray-700 first:border-t-0",children:Object(n.jsx)(yt.b,{draggableId:t.name,index:r,children:function(e,r){var a=Object(X.a)({cursor:"default"},e.draggableProps.style);return Object(n.jsxs)("li",Object(X.a)(Object(X.a)(Object(X.a)({className:"flex items-center select-none ".concat(d),ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{style:a,"data-testid":u,children:[Object(n.jsx)("span",{className:"flex-1 pl-4 py-1",onClick:c,children:t.name}),Object(n.jsx)("span",{onClick:s,className:"cursor-pointer pr-4 py-1 hover:text-white","data-testid":"hide-layer-button",children:Object(n.jsx)(Ze.a,{path:o,size:.6})})]}))}})})},It=r(32),Lt=r.n(It),Ct=function(e){var t=e.children,r=e.open,a=e.title,i=e.onClose,c=e.style;return Object(n.jsx)(Lt.a,{isOpen:r,contentLabel:a,onRequestClose:i,style:{overlay:{backgroundColor:"rgba(0,0,0,0.6)",zIndex:"29"},content:Object(X.a)({backgroundColor:"rgb(17, 24, 39)",borderRadius:"0.25rem",borderColor:"rgb(75, 85, 99)",color:"rgb(249, 250, 251)",top:"50%",left:"50%",right:"0",bottom:"0",transform:"translate(-50%, -50%)",zIndex:"30",padding:"1rem",height:"max-content",width:"max-content"},c)},children:Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:Object(n.jsx)("strong",{children:a})}),Object(n.jsx)("div",{className:"text-xs",children:t})]})})},Et=function(e){var t=e.text,r=e.onClick;return Object(n.jsx)("div",{className:"cursor-pointer block bg-green-600 hover:bg-green-700 active:bg-green-800 px-1 py-2 flex items-center text-center rounded-sm w-full",onClick:r,children:Object(n.jsx)("p",{className:"flex-1 text-white",children:Object(n.jsx)("strong",{children:t})})})},Tt=function(e){var t=e.layerName,r=e.open,i=e.onClose,c=Object(l.c)(),s=Object(a.useState)(0),o=Object(Xe.a)(s,2),d=o[0],u=o[1],h=Object(a.useState)(0),b=Object(Xe.a)(h,2),x=b[0],j=b[1],f=Object(l.d)((function(e){return e.layers.layers[t].tileSize}));Object(a.useEffect)((function(){f&&(u(f[0]),j(f[1]))}),[f]);var v=function(){var e=Object(re.a)(te.a.mark((function e(){var r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[parseInt(d),parseInt(x)],c(z(t,r)),i&&i();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)(Ct,{title:"Tileset Settings",open:r,onClose:i,children:[Object(n.jsxs)("form",{className:"mb-2",children:[Object(n.jsxs)("label",{children:["Tile dimensions (px):",Object(n.jsx)("br",{})]}),Object(n.jsxs)("div",{className:"mt-2",children:[Object(n.jsx)("input",{type:"number",value:d,onChange:function(e){u(e.target.value)},className:"w-14 mr-1"}),Object(n.jsx)("input",{type:"number",value:x,onChange:function(e){j(e.target.value)},className:"w-14 ml-1"})]})]}),Object(n.jsxs)("div",{className:"flex mt-2",children:[Object(n.jsx)("span",{className:"w-full mr-1",children:Object(n.jsx)(Et,{text:"Update",onClick:v})}),Object(n.jsx)("span",{className:"w-full ml-1",children:Object(n.jsx)(Et,{text:"Cancel",onClick:i})})]})]})},St=function(e){var t=e.selectedLayer,r=Object(l.c)(),i=Object(l.d)((function(e){return e.canvas.tileSize})),c=Object(a.useState)(!1),s=Object(Xe.a)(c,2),o=s[0],d=s[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"flex items-center justify-start mt-1",children:[Object(n.jsx)("button",{onClick:function(){r(N({tileSize:i}))},"data-testid":"add-layer-button",className:"hover:text-white",children:Object(n.jsx)(Ze.a,{path:st.t,size:.7})}),Object(n.jsx)("button",{onClick:function(){d(!0)},className:"hover:text-white",children:Object(n.jsx)(Ze.a,{path:st.a,size:.6})}),Object(n.jsx)("button",{onClick:function(){r({type:A,payload:{name:t}})},"data-testid":"delete-layer-button",className:"hover:text-white",children:Object(n.jsx)(Ze.a,{path:st.d,size:.65})})]}),o&&Object(n.jsx)(Tt,{layerName:t,open:o,onClose:function(){d(!1)}})]})},Bt=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return{selectedLayer:e.layers.selected,layers:mt(e)}})),r=t.selectedLayer,a=t.layers,i=a.map((function(e,t){return Object(n.jsx)(wt,{index:t,layer:e,isSelected:e.name===r},e.name)})),c=a&&a.length?Object(n.jsx)(yt.a,{onDragEnd:function(t){var r,n;e((r=t.draggableId,n=a.length-t.destination.index-1,{type:w,payload:{name:r,to:n}}))},onBeforeDragStart:function(t){e(D(t.draggableId))},children:Object(n.jsx)(yt.c,{droppableId:"layers",children:function(e){return Object(n.jsxs)("ul",Object(X.a)(Object(X.a)({},e.droppableProps),{},{ref:e.innerRef,className:"border rounded-sm border-gray-700",children:[i,e.placeholder]}))}})}):Object(n.jsx)("div",{});return Object(n.jsxs)(At,{title:"Layers",children:[c,Object(n.jsx)(St,{selectedLayer:r})]})},kt=function(e){var t=e.tilesetName,r=e.selectable,i=e.tileSize,c=e.tilesetIndex,s=Object(l.c)(),o=Object(a.useState)(null),d=Object(Xe.a)(o,2),u=d[0],h=d[1],b=Object(a.useState)(c),x=Object(Xe.a)(b,2),f=x[0],v=x[1],p=Object(a.useState)(i),g=Object(Xe.a)(p,2),m=g[0],O=g[1],A=Object(a.useRef)(null),y=Object(a.useRef)(null);Object(a.useEffect)((function(){O(i)}),[i]),Object(a.useEffect)((function(){v(c)}),[c]),Object(a.useEffect)((function(){if(t&&""!==t&&A.current&&y.current){var e=y.current,r=A.current;oe(t).then((function(t){var n=new FileReader,a=new Image;n.onload=function(n){a.onload=function(){O(t.tileSize),e.width=a.width,e.height=a.height,r.width=a.width,r.height=a.height,e.getContext("2d").drawImage(a,0,0),v(t.tilesetIndex)},a.src=n.target.result},n.readAsDataURL(t.file)}))}}),[t]),Object(a.useEffect)((function(){var e=A.current;if(e&&m){var t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),pe({context:t,width:e.width,height:e.height,tileSize:m,color:"#dddddd"}),u&&function(e){var t=e.canvas,r=e.position,n=e.tileSize,a=t.getContext("2d");a.fillStyle="rgba(79, 70, 229, 0.4)",a.fillRect(r[0]*n[0]+1,r[1]*n[1]+1,n[0]-1,n[1]-1)}({canvas:e,position:u,tileSize:m})}}),[m,u]);return""===t?Object(n.jsx)("div",{}):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"max-h-40 max-w-full overflow-scroll border inline-block rounded-sm mt-2",children:Object(n.jsxs)("div",{className:"grid",children:[Object(n.jsx)("canvas",{id:"grid-canvas",onMouseUp:function(e){if(r&&m){var t=fe(e,m),n=f+t[1]*Math.floor(e.target.width/m[0])+t[0];s({type:j,payload:{value:n}}),h(t)}},ref:A,className:"col-span-full row-span-full z-10 overflow-hidden"}),Object(n.jsx)("canvas",{id:"tileset-canvas",ref:y,className:"col-span-full row-span-full z-0 overflow-hidden"})]})})})},Nt=function(e){var t=e.value,r=e.options,a=e.onChange;return Object(n.jsx)("select",{className:"text-gray-400 w-full px-1 py-1 bg-gray-800 hover:bg-gray-700 hover:text-white border border-gray-700 rounded-sm",value:t,onChange:a,"data-testid":"select-tag",children:r})},zt=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.tileset})),r=t.selectedTileset,i=t.tilesetNames;Object(a.useEffect)((function(){var t=localStorage.getItem(ie);t&&""!==t?e(T(t)):localStorage.setItem(ie,"")}),[e]);var c,s=[],o=Object(M.a)(i);try{for(o.s();!(c=o.n()).done;){var d=c.value;s.push(Object(n.jsx)("option",{value:d,"data-testid":d,children:d},d))}}catch(u){o.e(u)}finally{o.f()}return i.length>0&&Object(n.jsx)(Nt,{value:r,options:s,onChange:function(t){var r=t.target.value;localStorage.setItem(ie,r),e(T(r))}})},Dt=function(e){var t=e.title,r=e.onUpload;return Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{type:"file",name:"tilesetFile",id:"tilesetFile",min:"1",max:"100",value:"",onChange:r,style:{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:"-1"}}),Object(n.jsx)("label",{htmlFor:"tilesetFile",className:"block ",children:Object(n.jsx)(Et,{text:t})})]})},Mt=function(e){var t=e.tilesetName,r=e.open,i=e.onClose,c=Object(l.c)(),s=Object(a.useState)(0),o=Object(Xe.a)(s,2),d=o[0],u=o[1],h=Object(a.useState)(0),b=Object(Xe.a)(h,2),x=b[0],j=b[1],f=Object(l.d)((function(e){return e.tileset.tilesets[t].tileSize}));Object(a.useEffect)((function(){f&&(u(f[0]),j(f[1]))}),[f]);var v=function(){var e=Object(re.a)(te.a.mark((function e(){var r,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[parseInt(d),parseInt(x)],e.next=3,ge.addTiles(t,r);case 3:n=e.sent,c(S(t,r,n)),i&&i();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)(Ct,{title:"Tileset Settings",open:r,onClose:i,children:[Object(n.jsxs)("form",{className:"mb-2",children:[Object(n.jsxs)("label",{children:["Tile dimensions (px):",Object(n.jsx)("br",{})]}),Object(n.jsxs)("div",{className:"mt-2",children:[Object(n.jsx)("input",{type:"number",value:d,onChange:function(e){u(e.target.value)},className:"w-14 mr-1"}),Object(n.jsx)("input",{type:"number",value:x,onChange:function(e){j(e.target.value)},className:"w-14 ml-1"})]})]}),d>0&&x>0&&Object(n.jsx)(kt,{tilesetName:t,selectable:!1,tileSize:[parseInt(d),parseInt(x)]}),Object(n.jsxs)("div",{className:"flex mt-2",children:[Object(n.jsx)("span",{className:"w-full mr-1",children:Object(n.jsx)(Et,{text:"Update",onClick:v})}),Object(n.jsx)("span",{className:"w-full ml-1",children:Object(n.jsx)(Et,{text:"Cancel",onClick:i})})]})]})},Rt=function(e){var t=e.selectedTileset,r=Object(l.c)(),i=Object(a.useState)(!1),c=Object(Xe.a)(i,2),s=c[0],o=c[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"flex items-center justify-start",children:[Object(n.jsx)("button",{onClick:function(){o(!0)},className:"hover:text-white",children:Object(n.jsx)(Ze.a,{path:st.a,size:.6})}),Object(n.jsx)("button",{onClick:function(){r({type:x,payload:{name:t}})},className:"hover:text-white","data-testid":"tileset-footer-delete-button",children:Object(n.jsx)(Ze.a,{path:st.d,size:.65})})]}),s&&Object(n.jsx)(Mt,{tilesetName:t,open:s,onClose:function(){o(!1)}})]})},Qt=function(){var e=Object(l.c)(),t=(Object(l.d)((function(e){return e.tileset.tilesetNames})),Object(l.d)((function(e){return e.tileset.hasLoadedTextures}))),r=Object(l.d)((function(e){return e.tileset.selectedTileset})),i=Object(l.d)((function(e){return e.canvas.tileSize})),c=Object(l.d)((function(e){return e.tileset.tilesets[r]}));Object(a.useEffect)((function(){t||le().then(function(){var t=Object(re.a)(te.a.mark((function t(r){var n,a,i,c;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(M.a)(r),t.prev=1,n.s();case 3:if((a=n.n()).done){t.next=11;break}return i=a.value,t.next=7,oe(i);case 7:c=t.sent,e(C(i,c.tileSize,c.tilesetIndex));case 9:t.next=3;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),n.e(t.t0);case 16:return t.prev=16,n.f(),t.finish(16);case 19:e(E());case 20:case"end":return t.stop()}}),t,null,[[1,13,16,19]])})));return function(e){return t.apply(this,arguments)}}())}),[e,t]);return Object(n.jsx)(At,{title:"Tileset",children:t?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(zt,{}),Object(n.jsx)("div",{className:"mt-2","data-testid":"tileset-file-input",children:Object(n.jsx)(Dt,{title:"Add Tileset",onUpload:function(t){var r;(r=t).target.files.length<=0||!r.target.files[0]||e(L(r.target.files[0].name,i,ge.lastId,r.target.files[0]))}})}),c&&Object(n.jsx)(kt,{tilesetName:r,selectable:!0,tileSize:c.tileSize,tilesetIndex:c.tilesetIndex}),r&&Object(n.jsx)(Rt,{selectedTileset:r})]}):Object(n.jsx)("div",{})})},Ut=function(){return Object(n.jsxs)(vt,{title:"Edit",children:[Object(n.jsx)(Bt,{}),Object(n.jsx)(Qt,{})]})},Pt=function(e){var t=e.children;return Object(n.jsx)("div",{className:"text-xs p-2",children:t})},Ft=function(){return Object(n.jsx)(vt,{title:"Import",children:Object(n.jsx)(Pt,{children:Object(n.jsx)("h3",{children:"Import"})})})},Gt=function(e){var t=e.format,r=e.onOptionSelected,a=[ne].map((function(e){return Object(n.jsx)("option",{value:e,children:e},e)}));return Object(n.jsx)(Nt,{value:t,options:a,onChange:r})},Xt=function(){var e=Object(a.useState)(ne),t=Object(Xe.a)(e,2),r=t[0],i=t[1],c=function(){var e=Object(re.a)(te.a.mark((function e(){var t,n,a,i;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.export(r);case 2:t=e.sent,n="tilemap."+r,a=new Blob([t],{type:"application/json"}),(i=document.createElement("a")).href=URL.createObjectURL(a),i.download=n,i.click();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(vt,{title:"Export Map",children:Object(n.jsxs)(Pt,{children:[Object(n.jsx)("div",{className:"mb-2",children:Object(n.jsx)(Gt,{format:r,onOptionSelected:function(e){i(e.target.value)}})}),Object(n.jsx)(Et,{text:"Export",onClick:c})]})})},Yt=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.canvas.tileSize})),r=Object(a.useState)(t[0]),i=Object(Xe.a)(r,2),c=i[0],s=i[1],o=Object(a.useState)(t[1]),d=Object(Xe.a)(o,2),u=d[0],h=d[1];return Object(n.jsx)(vt,{title:"Project Settings",children:Object(n.jsx)(Pt,{children:Object(n.jsxs)("form",{children:[Object(n.jsxs)("label",{children:["Global tile dimensions (px):",Object(n.jsx)("br",{})]}),Object(n.jsxs)("div",{className:"my-2",children:[Object(n.jsx)("input",{type:"number",value:c,onChange:function(e){s(e.target.value)},className:"w-14 mr-1"}),Object(n.jsx)("input",{type:"number",value:u,onChange:function(e){h(e.target.value)},className:"w-14 ml-1"})]}),Object(n.jsxs)("div",{className:"mb-2 flex items-center",children:[Object(n.jsx)("input",{type:"checkbox",name:"apply-globally",className:"mr-2 bg-green-500"}),Object(n.jsx)("label",{htmlFor:"apply-globally",children:"Apply to existing layers and tilesets"})]}),Object(n.jsx)(Et,{text:"Update project",onClick:function(){var t;e((t=[parseInt(c),parseInt(u)],{type:v,payload:{size:t}}))}})]})})})},Vt=function(e){var t=e.children,r=e.href;return Object(n.jsx)("a",{href:r,className:"underline font-bold hover:text-green-400",target:"_blank",rel:"noopener noreferrer",children:t})},Jt=function(){return Object(n.jsx)(vt,{title:"About",children:Object(n.jsxs)(Pt,{children:[Object(n.jsxs)("div",{className:"max-w-md mx-2",children:[Object(n.jsx)("p",{className:"pb-2",children:"Textyle is a free and open source tilemap editor that is still in development. The goal is to provide the most simple and straightforward way to create 2D tilemaps."}),Object(n.jsxs)("p",{className:"pb-2",children:["If you need help using the editor, check the tutorials and documentation ",Object(n.jsx)(Vt,{href:"https://textyle.app/learn",children:"here"}),"."]}),Object(n.jsx)("p",{className:"pb-2",children:"If you enjoy this project and want to help in its development, consider:"}),Object(n.jsxs)("ul",{className:"list-disc ml-6 pb-2",children:[Object(n.jsxs)("li",{children:["Talking to us on ",Object(n.jsx)(Vt,{href:"https://discord.gg/BtEPJmkacp",children:"Discord"})]}),Object(n.jsxs)("li",{children:["Contributing to the code on ",Object(n.jsx)(Vt,{href:"https://github.com/stefandevai/textyle",children:"GitHub"})]}),Object(n.jsxs)("li",{children:[Object(n.jsx)(Vt,{href:"https://textyle.app/donate",children:"Donating"})," any amount"]})]})]}),Object(n.jsxs)("div",{className:"flex justify-evenly items-center mt-4",children:[Object(n.jsx)(Vt,{href:"https://discord.gg/BtEPJmkacp",children:Object(n.jsx)(Ze.a,{path:st.e,size:1})}),Object(n.jsx)(Vt,{href:"https://github.com/stefandevai/textyle",children:Object(n.jsx)(Ze.a,{path:st.j,size:1})}),Object(n.jsx)(Vt,{href:"https://textyle.app/learn",children:Object(n.jsx)(Ze.a,{path:st.u,size:1})}),Object(n.jsx)(Vt,{href:"https://textyle.app/donate",children:Object(n.jsx)(Ze.a,{path:st.i,size:1})})]})]})})},Wt=r(11),Ht=function(){var e=Object(l.c)(),t=Object(a.useState)(!1),r=Object(Xe.a)(t,2),i=r[0],c=r[1],s=Object(a.useState)(""),o=Object(Xe.a)(s,2),d=(o[0],o[1],Object(Wt.f)());Object(a.useEffect)((function(){"true"!==window.localStorage.getItem("welcomed")&&(window.localStorage.setItem("welcomed","true"),c(!0))}),[]);var u=function(){var t=function(e,t){for(var r=e.split(","),n=r[0].match(/:(.*?);/)[1],a=atob(r[1]),i=a.length,c=new Uint8Array(i);i--;)c[i]=a.charCodeAt(i);return new File([c],t,{type:n})}("data:image/png;base64,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","tileset_sample.png");e(L("Example Tileset",[32,32],ge.lastId,t)),e(E()),e(k(!0)),c(!1),d.replace("/tiles")};return i?Object(n.jsxs)(Ct,{open:i,onClose:u,style:{minHeight:"25rem"},children:[Object(n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Welcome to Textyle!"}),Object(n.jsxs)("div",{className:"max-w-md text-base",children:[Object(n.jsxs)("p",{className:"pb-4",children:["Textyle is a free and open source tilemap editor that is"," ",Object(n.jsx)("span",{className:"underline",children:"still in development"}),". The goal is to provide the most simple and straightforward way to create 2D tilemaps."]}),Object(n.jsx)("p",{className:"pb-4",children:"If you enjoy this project and want to help in its development, consider:"}),Object(n.jsxs)("ul",{className:"list-disc ml-8 pb-4",children:[Object(n.jsxs)("li",{children:["Talking to us on ",Object(n.jsx)(Vt,{href:"https://discord.gg/BtEPJmkacp",children:"Discord"})]}),Object(n.jsxs)("li",{children:["Contributing to the code on ",Object(n.jsx)(Vt,{href:"https://github.com/stefandevai/textyle",children:"GitHub"})]}),Object(n.jsxs)("li",{children:[Object(n.jsx)(Vt,{href:"https://textyle.app/donate",children:"Donating"})," any amount"]})]}),Object(n.jsx)("p",{className:"pb-4",children:"Thank you so much for trying this early version of Textyle :)"})]}),Object(n.jsx)("div",{className:"w-full text-base font-bold pb-2",children:Object(n.jsx)(Et,{text:"Start Tiling!",onClick:u})})]}):null},Zt=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.canvas.showSidebar}));Object(a.useEffect)((function(){var t=window.location.hash;t&&""!==t&&"#/"!==t&&e(k(!0))}),[]);var r=t?{width:"23vw",gridTemplateColumns:"40px 1fr"}:{width:"40px",gridTemplateColumns:"40px 0px"},i=t?{width:"100%",borderRight:"1px solid rgb(75, 85, 99)"}:{width:"0"};return Object(n.jsx)("div",{className:"col-start-1 col-end-2 row-start-1 row-end-3 z-20 flex",children:Object(n.jsxs)(We.a,{className:"flex-1",children:[Object(n.jsxs)("aside",{style:Object(X.a)({transition:"all 150ms ease-in-out",display:"grid"},r),children:[Object(n.jsx)(ft,{}),Object(n.jsx)("div",{className:"bg-gray-900 border-b ".concat(Ke),style:i,"data-testid":t?"sidebar-element":"",children:t&&Object(n.jsxs)(Wt.c,{children:[Object(n.jsx)(Wt.a,{path:"/".concat($e),children:Object(n.jsx)(Ut,{})}),Object(n.jsx)(Wt.a,{path:"/".concat(et),children:Object(n.jsx)(Ft,{})}),Object(n.jsx)(Wt.a,{path:"/".concat(tt),children:Object(n.jsx)(Xt,{})}),Object(n.jsx)(Wt.a,{path:"/".concat(rt),children:Object(n.jsx)(Yt,{})}),Object(n.jsx)(Wt.a,{path:"/".concat(nt),children:Object(n.jsx)(Jt,{})})]})})]}),Object(n.jsx)(Ht,{})]})})},Kt=function(e){var t=e.iconPath,r=e.tool,a=Object(l.c)(),i=Object(l.d)((function(e){return e.canvas.selectedTool})),c=r===i?"text-green-400 hover:text-green-500":"hover:text-green-500 cursor-pointer";return Object(n.jsxs)("button",{className:"px-3 py-2 cursor-default",role:"button","data-testid":r===i?"selected-tool":"",children:[Object(n.jsx)("div",{className:c,onClick:function(){a(B(r))},"data-tip":!0,"data-for":r,"data-testid":r,children:Object(n.jsx)(Ze.a,{path:t,size:.68})}),Object(n.jsx)(Je.a,{id:r,place:"bottom",effect:"solid",delayShow:600,children:ct.get(r)})]})},qt=function(e){var t=e.iconOn,r=e.iconOff,a=e.toggle,i=e.toggled,c=e.onClick,s=i?"text-green-400 hover:text-green-500 cursor-pointer":"hover:text-green-500 cursor-pointer",l=i?t:r;return Object(n.jsxs)("button",{className:"px-3 py-2 cursor-default",role:"button",children:[Object(n.jsx)("div",{className:s,onClick:c,"data-tip":!0,"data-for":a,"data-testid":a,children:Object(n.jsx)(Ze.a,{path:l,size:.68})}),Object(n.jsx)(Je.a,{id:a,place:"bottom",effect:"solid",delayShow:600,children:ct.get(a)})]})},_t=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.canvas.showGrid}));return Object(n.jsxs)("nav",{className:"col-start-2 col-end-5 row-start-1 row-end-2 z-20 flex flex-row items-stretch border-b border-r bg-almost-black ".concat(Ke," ").concat("h-7"),children:[Object(n.jsxs)("div",{className:"flex flex-row justify-start items-center flex-grow",children:[Object(n.jsx)(Kt,{iconPath:st.c,tool:V}),Object(n.jsx)(Kt,{iconPath:st.s,tool:J}),Object(n.jsx)(Kt,{iconPath:st.f,tool:W}),Object(n.jsx)(Kt,{iconPath:st.r,tool:H}),Object(n.jsx)(Kt,{iconPath:st.m,tool:Z}),Object(n.jsx)(Kt,{iconPath:st.o,tool:K})]}),Object(n.jsx)("div",{className:"flex flex-row justify-end items-center flex-grow",children:Object(n.jsx)(qt,{iconOn:st.l,iconOff:st.k,toggle:at,toggled:t,onClick:function(){e({type:g,payload:{}})}})})]})},$t=function(){return Object(n.jsx)("div",{className:"h-screen w-screen flex flex-col bg-gray-900 border-l border-t ".concat(Ke," text-gray-100"),children:Object(n.jsxs)("main",{className:"flex-1 grid grid-cols-4",style:{gridTemplateRows:"1.75rem 1fr",gridTemplateColumns:"auto 1fr 1fr 1fr"},children:[Object(n.jsx)(Zt,{}),Object(n.jsx)(_t,{}),Object(n.jsx)(Ve,{})]})})};r(77);Lt.a.setAppElement("#root"),s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(l.a,{store:we,children:Object(n.jsx)($t,{})})}),document.getElementById("root"))}},[[78,2,3]]]);
//# sourceMappingURL=main.f615196d.chunk.js.map